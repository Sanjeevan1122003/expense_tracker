{"ast":null,"code":"import React,{useState,useEffect,Suspense}from\"react\";import{BrowserRouter as Router,Routes,Route,Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import Cookies from\"js-cookie\";import{jwtDecode}from\"jwt-decode\";import Register from\"./pages/register\";import Login from\"./pages/login\";import\"./App.css\";import expenseLogo from\"./assets/expense_tracker_logo.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;const Dashboard=/*#__PURE__*/React.lazy(()=>import(\"./pages/dashboard\"));function App(){const[email,setEmail]=useState(null);useEffect(()=>{const token=Cookies.get(\"token\");if(token){try{const decoded=jwtDecode(token);setEmail(decoded.email);if(window.location.pathname===\"/login\"||window.location.pathname===\"/\"){window.location.href=\"/dashboard\";}}catch(err){setEmail(null);window.location.href=\"/login\";}}else{setEmail(null);if(window.location.pathname!==\"/login\"&&window.location.pathname!==\"/register\"){window.location.href=\"/login\";}}},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:expenseLogo,className:\"App-logo\",alt:\"logo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"App-heading\",children:\"Welcome to Expense Tracker\"}),/*#__PURE__*/_jsx(Link,{className:\"getstarted\",to:\"/register\",children:\"Get started\"})]})})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{email:email})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginTop:\"50px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"404 - Page Not Found\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Home\"})]})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Suspense","BrowserRouter","Router","Routes","Route","Link","useNavigate","axios","Cookies","jwtDecode","Register","Login","expenseLogo","jsx","_jsx","jsxs","_jsxs","defaults","withCredentials","Dashboard","lazy","App","email","setEmail","token","get","decoded","window","location","pathname","href","err","children","fallback","path","element","className","src","alt","to","style","textAlign","marginTop"],"sources":["D:/expense-tracker/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, Suspense } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { jwtDecode } from \"jwt-decode\";\nimport Register from \"./pages/register\";\nimport Login from \"./pages/login\";\nimport \"./App.css\";\nimport expenseLogo from \"./assets/expense_tracker_logo.png\";\n\naxios.defaults.withCredentials = true;\n\nconst Dashboard = React.lazy(() => import(\"./pages/dashboard\"));\n\nfunction App() {\n  const [email, setEmail] = useState(null);\n\n  useEffect(() => {\n    const token = Cookies.get(\"token\");\n    if (token) {\n      try {\n        const decoded = jwtDecode(token);\n        setEmail(decoded.email);\n        if (window.location.pathname === \"/login\" || window.location.pathname === \"/\") {\n          window.location.href = \"/dashboard\";\n        }\n      } catch (err) {\n        setEmail(null);\n        window.location.href = \"/login\";\n      }\n    } else {\n      setEmail(null);\n      if (window.location.pathname !== \"/login\" && window.location.pathname !== \"/register\") {\n        window.location.href = \"/login\";\n      }\n    }\n  }, []);\n\n  return (\n    <Router>\n      <Suspense fallback={<div>Loading...</div>}>\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <div className=\"App\">\n                <header className=\"App-header\">\n                  <img\n                    src={expenseLogo}\n                    className=\"App-logo\"\n                    alt=\"logo\"\n                  />\n                  <p className=\"App-heading\">Welcome to Expense Tracker</p>\n                  <Link className=\"getstarted\" to=\"/register\">\n                    Get started\n                  </Link>\n                </header>\n              </div>\n            }\n          />\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/register\" element={<Register />} />\n          <Route path=\"/dashboard\" element={<Dashboard email={email} />} />\n          <Route\n            path=\"*\"\n            element={\n              <div style={{ textAlign: \"center\", marginTop: \"50px\" }}>\n                <h2>404 - Page Not Found</h2>\n                <Link to=\"/\">Go Home</Link>\n              </div>\n            }\n          />\n        </Routes>\n      </Suspense>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}